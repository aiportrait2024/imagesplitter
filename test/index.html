<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Image Splitter | Advanced Image Grid Divider</title>
    <meta name="description" content="Easily split and divide images into multiple grid sections. Perfect for designers, photographers, and content creators. Free online image tool.">
    <meta name="keywords" content="image splitter, photo grid, image divider, photo cutter, online image tool">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="/placeholder-logo.svg">
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.7.1/dist/jszip.min.js"></script>
    <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
</head>
<body class="bg-gray-50">
    <div id="root" class="min-h-screen flex flex-col">
        <header class="bg-white shadow-md">
            <div class="container mx-auto px-4 py-4 flex justify-between items-center">
                <div class="flex items-center">
                    <img src="/placeholder-logo.svg" alt="Logo" class="h-10 w-10 mr-4">
                    <h1 class="text-xl font-bold text-gray-800">Image Splitter</h1>
                </div>
            </div>
        </header>

        <main class="flex-grow container mx-auto px-4 py-8">
            <h1 class="text-3xl font-bold text-center mb-8">Best Image Splitter Online</h1>
            <div id="image-splitter-app"></div>

            <!-- SEO Content -->
            <section class="mt-12 bg-gray-100 p-6 rounded-lg">
                <h2 class="text-2xl font-bold mb-4">Application Scenarios</h2>
                <p class="mb-4">Our Image Splitter is perfect for designers creating precise grid layouts, photographers who want to divide high-resolution images, and content creators optimizing visuals for social media. Whether you're preparing images for Instagram, building a puzzle game, or crafting marketing materials, this tool makes the process fast and efficient.</p>

                <h2 class="text-2xl font-bold mb-4">How to Use</h2>
                <ol class="list-decimal list-inside mb-4">
                    <li>Upload your image by clicking the "Upload Image" button.</li>
                    <li>Specify the number of rows and columns for your grid.</li>
                    <li>Preview the grid layout to ensure accuracy.</li>
                    <li>Click "Split Image" to divide the image into multiple sections.</li>
                    <li>Download the individual sections or save them as a ZIP file.</li>
                </ol>

                <h2 class="text-2xl font-bold mb-4">FAQ</h2>
                <p class="mb-2"><strong>Q: What image formats are supported?</strong><br>A: We support popular formats like JPEG, PNG, and GIF. Ensure your file is under 5MB for optimal performance.</p>
                <p class="mb-2"><strong>Q: Can I customize the grid dimensions?</strong><br>A: Yes, you can specify the exact number of rows and columns to suit your needs.</p>
                <p class="mb-2"><strong>Q: Is the tool free?</strong><br>A: Absolutely! Our Image Splitter is completely free to use without any hidden costs.</p>
            </section>
        </main>

        <footer class="bg-gray-800 text-white py-8">
            <div class="container mx-auto px-4 grid md:grid-cols-3 gap-8">
                <div>
                    <h3 class="font-bold mb-4">About Image Splitter</h3>
                    <p>An advanced online tool to split images into multiple grid sections with ease and precision.</p>
                </div>
                <div>
                    <h3 class="font-bold mb-4">Quick Links</h3>
                    <ul>
                        <li><a href="#" class="hover:text-blue-300">Home</a></li>
                        <li><a href="https://imagesplitters.com/privacy-policy" class="hover:text-blue-300">Privacy Policy</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold mb-4">Contact</h3>
                    <p>Email: support@imagesplitter.com</p>
                    <p>Â© 2024 Image Splitter. All Rights Reserved.</p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        function createState(initialValue) {
            let value = initialValue;
            const listeners = [];
            return {
                get current() { return value; },
                set current(newValue) {
                    value = newValue;
                    listeners.forEach(listener => listener(value));
                },
                subscribe(listener) {
                    listeners.push(listener);
                    return () => {
                        const index = listeners.indexOf(listener);
                        if (index > -1) listeners.splice(index, 1);
                    };
                }
            };
        }

        function ImageSplitter() {
            const imageState = createState(null);
            const originalGridPreviewState = createState(null);
            const splitImagesState = createState([]);
            const rowsState = createState(3);
            const columnsState = createState(3);

            const fileInputRef = { current: null };

            function createGridPreview(img) {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = img.width;
                canvas.height = img.height;

                ctx.drawImage(img, 0, 0);
                ctx.strokeStyle = 'rgba(255, 0, 0, 0.5)';
                ctx.lineWidth = 2;

                const cellWidth = img.width / columnsState.current;
                const cellHeight = img.height / rowsState.current;

                for (let row = 1; row < rowsState.current; row++) {
                    ctx.beginPath();
                    ctx.moveTo(0, row * cellHeight);
                    ctx.lineTo(img.width, row * cellHeight);
                    ctx.stroke();
                }

                for (let col = 1; col < columnsState.current; col++) {
                    ctx.beginPath();
                    ctx.moveTo(col * cellWidth, 0);
                    ctx.lineTo(col * cellWidth, img.height);
                    ctx.stroke();
                }

                return canvas.toDataURL();
            }

            function handleImageUpload(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = new Image();
                        img.onload = () => {
                            imageState.current = img;
                            originalGridPreviewState.current = createGridPreview(img);
                            splitImagesState.current = [];
                            render();
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
            }

            function splitImage() {
                if (!imageState.current) return;

                const splitResult = [];
                const cellWidth = Math.floor(imageState.current.width / columnsState.current);
                const cellHeight = Math.floor(imageState.current.height / rowsState.current);

                for (let row = 0; row < rowsState.current; row++) {
                    for (let col = 0; col < columnsState.current; col++) {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        canvas.width = cellWidth;
                        canvas.height = cellHeight;

                        ctx.drawImage(
                            imageState.current,
                            col * cellWidth, 
                            row * cellHeight, 
                            cellWidth, 
                            cellHeight,
                            0, 
                            0, 
                            cellWidth, 
                            cellHeight
                        );

                        splitResult.push({
                            dataUrl: canvas.toDataURL(),
                            filename: `split_image_row${row+1}_col${col+1}.png`
                        });
                    }
                }

                splitImagesState.current = splitResult;
                render();
            }

            async function downloadAllImages() {
                const JSZip = window.JSZip;
                const zip = new JSZip();
                const imageFolder = zip.folder('split_images');

                splitImagesState.current.forEach((img) => {
                    imageFolder.file(img.filename, img.dataUrl.split(',')[1], {base64: true});
                });

                const content = await zip.generateAsync({type: 'blob'});
                const link = document.createElement('a');
                link.href = URL.createObjectURL(content);
                link.download = 'split_images.zip';
                link.click();
            }

            function downloadSingleImage(dataUrl, filename) {
                const link = document.createElement('a');
                link.href = dataUrl;
                link.download = filename;
                link.click();
            }

            function render() {
                const app = document.getElementById('image-splitter-app');
                app.innerHTML = `
                    <div class="max-w-4xl mx-auto">
                        <div class="text-center border-2 border-dashed border-gray-300 p-8 mb-6">
                            <input type="file" id="file-input" accept="image/*" class="hidden" />
                            <p class="text-gray-600">Upload Image</p>
                        </div>
                        <div class="mb-4">
                            <input type="number" id="rows-input" value="${rowsState.current}" placeholder="Rows" class="p-2 border rounded" min="1" max="10" />
                            <input type="number" id="columns-input" value="${columnsState.current}" placeholder="Columns" class="p-2 border rounded" min="1" max="10" />
                            <button id="split-button" class="p-2 bg-blue-500 text-white rounded">Split Image</button>
                        </div>
                        ${originalGridPreviewState.current ? `<div class="mb-4">
                            <h2 class="text-lg">Original Image Preview</h2>
                            <img src="${originalGridPreviewState.current}" alt="Preview" class="max-w-full">
                        </div>` : ''}
                        ${splitImagesState.current.length ? `<div>
                            <h2 class="text-lg">Split Results</h2>
                            <button id="download-all-btn" class="p-2 bg-blue-500 text-white rounded">Download All (ZIP)</button>
                        </div>` : ''}
                    </div>
                `;

                document.getElementById('file-input').addEventListener('change', handleImageUpload);
                document.getElementById('split-button').addEventListener('click', splitImage);
                document.getElementById('download-all-btn')?.addEventListener('click', downloadAllImages);
            }

            render();
        }

        ImageSplitter();
    </script>
</body>
</html>
